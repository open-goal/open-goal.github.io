<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-reference/method_system">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@400;500;700&family=Roboto+Mono:wght@400;700&display=swap">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.0.0-beta.74/dist/themes/dark.css">
<script src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.0.0-beta.74/dist/shoelace.js" type="module"></script><title data-rh="true">OpenGOAL&#x27;s Method System | OpenGOAL</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://open-goal.github.io/docs/reference/method_system"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="OpenGOAL&#x27;s Method System | OpenGOAL"><meta data-rh="true" name="description" content="OpenGOAL has a virtual method system. This means that child types can override parent methods.  The first argument to a method is always the object the method is being called on, except for new."><meta data-rh="true" property="og:description" content="OpenGOAL has a virtual method system. This means that child types can override parent methods.  The first argument to a method is always the object the method is being called on, except for new."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://open-goal.github.io/docs/reference/method_system"><link data-rh="true" rel="alternate" href="https://open-goal.github.io/docs/reference/method_system" hreflang="en"><link data-rh="true" rel="alternate" href="https://open-goal.github.io/docs/reference/method_system" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.09ceced1.css">
<link rel="preload" href="/assets/js/runtime~main.b80e7d5d.js" as="script">
<link rel="preload" href="/assets/js/main.1d3489b1.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="OpenGOAL Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="OpenGOAL Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">OpenGOAL</b></a><a class="navbar__item navbar__link" href="/progress">Progress</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/open-goal" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">An Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/language-reference">Language Reference</a><button aria-label="Toggle the collapsible sidebar category &#x27;Language Reference&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/type_system">OpenGOAL&#x27;s Type System</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/reference/method_system">OpenGOAL&#x27;s Method System</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/syntax">OpenGOAL Syntax &amp; Examples</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/lib">Standard Library</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/reader">Reader</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/goos">GOOS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/object_file_formats">Object File Formats</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/process_and_state">Process and State</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/decompiler_states">States in the Decompiler</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/usage">Usage</a><button aria-label="Toggle the collapsible sidebar category &#x27;Usage&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/developing">Developing</a><button aria-label="Toggle the collapsible sidebar category &#x27;Developing&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/pc-port-info">PC Port Info</a><button aria-label="Toggle the collapsible sidebar category &#x27;PC Port Info&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/language-reference"><span itemprop="name">Language Reference</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">OpenGOAL&#x27;s Method System</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>OpenGOAL&#x27;s Method System</h1><p>OpenGOAL has a virtual method system. This means that child types can override parent methods.  The first argument to a method is always the object the method is being called on, except for <code>new</code>.</p><p>All types have methods. Objects have access to all of their parents methods, and may override parent methods.  All types have these 9 methods:</p><ul><li><code>new</code> - like a constructor, returns a new object.  It&#x27;s not used in all cases, and on all types, and needs more documentation on when specifically it is used.</li><li><code>delete</code> - basically unused, but like a destructor.  Often calls <code>kfree</code>, which does nothing.</li><li><code>print</code> - prints a short, one line representation of the object to the <code>PrintBuffer</code></li><li><code>inspect</code> - prints a multi-line description of the object to the <code>PrintBuffer</code>. Usually auto-generated by the compiler and prints out the name and value of each field.</li><li><code>length</code> - Returns a length if the type has something like a length (number of characters in string, etc). Otherwise returns 0. Usually returns the number of filled slots, instead of the total number of allocated slots, when there is possibly a difference.</li><li><code>asize-of</code> - Gets the size in memory of the entire object.  Usually this just looks this up from the appropriate <code>type</code>, unless it&#x27;s dynamically sized.</li><li><code>copy</code> - Create a copy of this object on the given heap. Not used very much?</li><li><code>relocate</code> - Some GOAL objects will be moved in memory by the kernel as part of the compacting actor heap system. After being moved, the <code>relocate</code> method will be called with the offset of the move, and the object should fix up any internal pointers which may point to the old location. It&#x27;s also called on v2 objects loaded by the linker when they are first loaded into memory.</li><li><code>memusage</code> - Not understood yet, but probably returns how much memory in bytes the object uses. Not supported by all objects.</li></ul><p>Usually a method which overrides a parent method must have the same argument and return types.  The only exception is <code>new</code> methods, which can have different argument/return types from the parent.  (Dee the later section on <code>_type_</code> for another exception)</p><p>The compiler&#x27;s implementation for calling a method is:</p><ul><li>Is the type a basic?<ul><li>If so, look up the type using runtime type information</li><li>Get the method from the vtable</li></ul></li><li>Is the type not a basic?<ul><li>Get the method from the vtable of the compile-time type</li><li>Note that this process isn&#x27;t very efficient - instead of directly linking to the slot in the vtable (one deref) it first looks up the <code>type</code> by symbol, then the slot (two derefs). I have no idea why it&#x27;s done this way.</li></ul></li></ul><p>In general, I suspect that the method system was modified after GOAL was first created. There is some evidence that types were once stored in the symbol table, but were removed because the symbol table became full.  This could explain some of the weirdness around method calls/definition rules, and the disaster <code>method-set!</code> function.</p><p>All type definitions should also define all the methods, in the order they appear in the vtable.  I suspect GOAL had this as well because the method ordering otherwise seems random, and in some cases impossible to get right unless (at least) the number of methods was specified in the type declaration.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="special-_type_-type">Special <code>_type_</code> Type<a class="hash-link" href="#special-_type_-type" title="Direct link to heading">​</a></h2><p>The first argument of a method always contains the object that the method is being called on.  It also must have the type <code>_type_</code>, which will be substituted by the type system (at compile time) using the following rules:</p><ul><li>At method definition: replace with the type that the method is being defined for.</li><li>At method call: replace with the compile-time type of the object the method is being called on.</li></ul><p>The type system is flexible with allowing you to use <code>_type_</code> in the method declaration in <code>deftype</code>, but not using <code>_type_</code> in the actual <code>defmethod</code>.</p><p>A method can have other arguments or a return value that&#x27;s of type <code>_type_</code>. This special &quot;type&quot; will be replaced <strong>at compile time</strong> with the type which is defining or calling the method.  No part of this exists at runtime.  It may seem weird, but there are two uses for this.</p><p>The first is to allow children to specialize methods and have their own child type as an argument type. For example, say you have a method <code>is-same-shape</code>, which compares two objects and sees if they are the same shape. Suppose you first defined this for type <code>square</code> with</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">(defmethod square is-same-shape ((obj1 square) (obj2 square))</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  (= (-&gt; obj1 side-length) (-&gt; obj2 side-length))</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> )</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then, if you created a child class of <code>square</code> called <code>rectangle</code> (this is a terrible way to use inheritance, but it&#x27;s just an example), and overrode the <code>is-same-shape</code> method, you would have to have arguments that are <code>square</code>s, which blocks you from accessing <code>rectangle</code>-specific fields.  The solution is to define the original method with type <code>_type_</code> for the first two arguments.  Then, the method defined for <code>rectangle</code> also will have arguments of type <code>_type_</code>, which will expand to <code>rectangle</code>.</p><p>The second use is for a return value.  For example, the <code>print</code> and <code>inspect</code> methods both return the object that is passed to them, which will always be the same type as the argument passed in.  If <code>print</code> was define as <code>(function object object)</code>, then <code>(print my-square)</code> would lose the information that the return object is a <code>square</code>.  If <code>print</code> is a <code>(function _type_ _type_)</code>, the type system will know that <code>(print my-square)</code> will return a <code>square</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="details-on-the-order-of-overrides">Details on the Order of Overrides<a class="hash-link" href="#details-on-the-order-of-overrides" title="Direct link to heading">​</a></h2><p>The order in which you <code>defmethod</code> and <code>deftype</code> matters.</p><p>When you <code>deftype</code>, you copy all methods from the parent. When you <code>defmethod</code>, you always set a method in that type. You may also override methods in a child if: the child hasn&#x27;t modified that method already, and if you are in a certain mode. This is a somewhat slow process that involves iterating over the entire symbol table and every type in the runtime, so I believe it was disabled when loading level code, and you just had to make sure to <code>deftype</code> and <code>defmethod</code> in order.</p><p>Assume you have the type hierarchy where <code>a</code> is the parent of <code>b</code>, which is the parent of <code>c</code>.</p><p>If you first define the three types using <code>deftype</code>, then override a method from <code>a</code> on <code>c</code>, then override that same method on <code>b</code>, then <code>c</code> won&#x27;t use the override from <code>b</code>.</p><p>If you first define the three types using <code>deftype</code>, then override a method on <code>b</code>, it will <em>sometimes</em> do the override on <code>c</code>. This depends on the value of the global variable <code>*enable-method-set*</code>, and some other confusing options. It may also print a warning but still do the override in certain cases.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="built-in-methods">Built in Methods<a class="hash-link" href="#built-in-methods" title="Direct link to heading">​</a></h2><p>All types have these 9 methods. They have reasonable defaults if you don&#x27;t provide anything.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="new"><code>new</code><a class="hash-link" href="#new" title="Direct link to heading">​</a></h3><p>The new method is a very special method used to construct a new object, like a constructor. Note that some usages of the <code>new</code> keyword <strong>do not</strong> end up calling the new method. See the <code>new</code> section for more details. Unlike C++, fields of a type and elements in an array are not constructed either.</p><p>The first argument is an &quot;allocation&quot;, indicating where the object should be constructed. It can be</p><ul><li>The symbol <code>&#x27;global</code> or <code>&#x27;debug</code>, indicating the global or debug heaps</li><li>The symbols <code>&#x27;process-level-heap</code> or <code>&#x27;loading-level</code>, indicating whatever heaps are stored in those symbols.</li><li><code>&#x27;process</code>, indicating the allocation should occur on the current process heap.</li><li><code>&#x27;scratch</code>, for allocating on the scratchpad. This is unused.</li><li>Otherwise it&#x27;s treated as a 16-byte aligned address and used for in place construction (it zeros the memory first)</li></ul><p>The second argument is the &quot;type to make&quot;.  It might seem stupid at first, but it allows child classes to use the same <code>new</code> method as the parent class.</p><p>The remaining arguments can be used for whatever you want.</p><p>When writing your own <code>new</code> methods, you should ignore the <code>allocation</code> argument and use the <code>object-new</code> macro to actually do the allocation.  This takes care of all the details for getting the memory (and setting up runtime type information if its a basic).  See the section on <code>object-new</code> for more details.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="delete"><code>delete</code><a class="hash-link" href="#delete" title="Direct link to heading">​</a></h3><p>This method isn&#x27;t really used very much. Unlike a C++ destructor it&#x27;s never called automatically. In some cases, it&#x27;s repurposed as a &quot;clean up&quot; type function but it doesn&#x27;t actually free any memory.  It takes no arguments.  The default implementations call <code>kfree</code> on what the allocation, but there are two issues:</p><ol><li>The implementation is sometimes wrong, likely confusing doing pointer math (steps by array stride) with address math (steps by one byte).</li><li>The <code>kfree</code> function does nothing.</li></ol><p>The <code>kheap</code> system doesn&#x27;t really support freeing objects unless you free in the opposite order you allocate, so it makes sense that <code>delete</code> doesn&#x27;t really work.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="print"><code>print</code><a class="hash-link" href="#print" title="Direct link to heading">​</a></h3><p>This method should print out a short description of the object (with no newlines) and return the object.  The printing should be done with <code>(format #t ...)</code> (see the section on <code>format</code>) for more information.  If you call <code>print</code> by itself, it&#x27;ll make this description show up in the REPL. (Note that there is some magic involved to add a newline here... there&#x27;s actually a function named <code>print</code> that calls the <code>print</code> method and adds a newline)</p><p>The default short description looks like this: <code>#&lt;test-type @ #x173e54&gt;</code> for printing an object of type <code>test-type</code>. Of course, you can override it with a better version.  Built-in types like string, type, boxed integer, pair, have reasonable overrides.</p><p>This method is also used to print out the object with <code>format</code>&#x27;s <code>~A</code> format option.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="inspect"><code>inspect</code><a class="hash-link" href="#inspect" title="Direct link to heading">​</a></h3><p>This method should print out a detailed, multi-line description. By default, <code>structure</code>s and <code>basic</code>s will have an auto-generated method that prints out the name and value of all fields.  For example:</p><div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">gc &gt; </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token car">inspect</span><span class="token plain"> *kernel-context*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">00164b44</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> kernel-context</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  prevent-from-run: </span><span class="token number">65</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  require-for-run: </span><span class="token number">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  allow-to-run: </span><span class="token number">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  next-pid: </span><span class="token number">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  fast-stack-top: </span><span class="token number">1879064576</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  current-process: #f</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  relocating-process: #f</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  relocating-min: </span><span class="token number">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  relocating-max: </span><span class="token number">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  relocating-offset: </span><span class="token number">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  low-memory-message: #t</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In some cases this method is overridden to provide nicer formatting.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="length"><code>length</code><a class="hash-link" href="#length" title="Direct link to heading">​</a></h3><p>This method should return a &quot;length&quot;.  The default method for this just returns 0, but for things like strings or buffers, it could be used to return the number of characters or elements in use.  It&#x27;s usually used to refer to how many are used, rather than the capacity.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="asize-of"><code>asize-of</code><a class="hash-link" href="#asize-of" title="Direct link to heading">​</a></h3><p>This method should return the size of the object. Including the 4 bytes of type info for a <code>basic</code>.</p><p>By default this grabs the value from the object&#x27;s <code>type</code>, which is only correct for non-dynamic types. For types like <code>string</code> or other dynamic types, this method should be overridden. If you intend to store dynamically sized objects of a given type on a process heap, you <strong>must</strong> implement this method accurately.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="copy"><code>copy</code><a class="hash-link" href="#copy" title="Direct link to heading">​</a></h3><p>Creates a copy of the object. I don&#x27;t think this used very much.  Just does a <code>memcpy</code> to duplicate by default.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="relocate"><code>relocate</code><a class="hash-link" href="#relocate" title="Direct link to heading">​</a></h3><p>The exact details are still unknown, but is used to update internal data structures after an object is moved in memory. This must be support for objects allocated in process heaps of processes allocated on the actor heap or debug actor heap.</p><p>It&#x27;s also called on objects loaded from a GOAL data object file.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mem-usage"><code>mem-usage</code><a class="hash-link" href="#mem-usage" title="Direct link to heading">​</a></h3><p>Not much is known yet, but used for computing memory usage statistics.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/open-goal/open-goal.github.io/tree/master/documentation/reference/method_system.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_eYIM" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vbeJ"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/reference/type_system"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">OpenGOAL&#x27;s Type System</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/reference/syntax"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">OpenGOAL Syntax &amp; Examples</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#special-_type_-type" class="table-of-contents__link toc-highlight">Special <code>_type_</code> Type</a></li><li><a href="#details-on-the-order-of-overrides" class="table-of-contents__link toc-highlight">Details on the Order of Overrides</a></li><li><a href="#built-in-methods" class="table-of-contents__link toc-highlight">Built in Methods</a><ul><li><a href="#new" class="table-of-contents__link toc-highlight"><code>new</code></a></li><li><a href="#delete" class="table-of-contents__link toc-highlight"><code>delete</code></a></li><li><a href="#print" class="table-of-contents__link toc-highlight"><code>print</code></a></li><li><a href="#inspect" class="table-of-contents__link toc-highlight"><code>inspect</code></a></li><li><a href="#length" class="table-of-contents__link toc-highlight"><code>length</code></a></li><li><a href="#asize-of" class="table-of-contents__link toc-highlight"><code>asize-of</code></a></li><li><a href="#copy" class="table-of-contents__link toc-highlight"><code>copy</code></a></li><li><a href="#relocate" class="table-of-contents__link toc-highlight"><code>relocate</code></a></li><li><a href="#mem-usage" class="table-of-contents__link toc-highlight"><code>mem-usage</code></a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 OpenGOAL. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.b80e7d5d.js"></script>
<script src="/assets/js/main.1d3489b1.js"></script>
</body>
</html>