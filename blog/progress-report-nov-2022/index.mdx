---
title: Progress Report - Nov. 2022
description: November 2022's progress report
slug: progress-report-nov-2022
authors:
  - vaser
tags: [progress-report]
image: ./img/jak-collision.png
hide_table_of_contents: false
draft: false
---

While not the busiest of months, there's definitely some exciting progress to share before the final month of the year.

<!--truncate-->

# Jak 2 - Decompilation

## Collison Work

If you havn't gathered from the previous reports, collision is one of the biggest hurdles and we are still working our way through it.

### Collide Shape and Others <PRLink href="https://github.com/open-goal/jak-project/pull/2008"/>

### Spatial Hash <PRLink href="https://github.com/open-goal/jak-project/pull/2009"/>

### Collide Cache Fixes <PRLink href="https://github.com/open-goal/jak-project/pull/2031"/>

## Cleanup of Files to get Target Working

`target` is the internal name for Jak, and a decent amount of time went into:
- cleaning up files we already had done
- completing a few files we skipped
- patching around bugs we've yet to solve

All in an effort to get Jak spawning in so we could test a bunch of stuff (like collision!)

### Camera Code Cleanup <PRLink href="https://github.com/open-goal/jak-project/pull/2010"/>

### Remaining Target and Drawing Code <PRLink href="https://github.com/open-goal/jak-project/pull/2012"/> <PRLink href="https://github.com/open-goal/jak-project/pull/2017"/> <PRLink href="https://github.com/open-goal/jak-project/pull/2026"/> <PRLink href="https://github.com/open-goal/jak-project/pull/2021"/> <PRLink href="https://github.com/open-goal/jak-project/pull/2027"/> <PRLink href="https://github.com/open-goal/jak-project/pull/2034"/>

### generic-obs <PRLink href="https://github.com/open-goal/jak-project/pull/2013"/>

### lightning-draw <PRLink href="https://github.com/open-goal/jak-project/pull/2019"/>

After a lot of work, we succeeded and Jak is working decently well already. Here's a bunch of test footage

<ReactPlayer controls url={require("./video/jak-collision.mp4").default} />

<ReactPlayer controls url={require("./video/jetboard.mp4").default} />

<ReactPlayer controls url={require("./video/jak-and-daxter.mp4").default} />

## In-game Editor Progress <PRLink href="https://github.com/open-goal/jak-project/pull/2029"/>

Jak 2 actually has a built-in editor that communicates originally with a MySQL database.  This seems to be used to allow the artists to move around various objects and lights, and is one of the reasons why the game has some rudimentary mouse support.

Still very much a work-in-progress and it doesn't do much yet, but we've finally gotten to the point where opening the editor no longer crashes the game, and some of the mouse code has been implemented.

![](./img/editor.png)

<ReactPlayer controls url={require("./video/mouse.mp4").default} />

## Progress Menu "Opens"! <PRLink href="https://github.com/open-goal/jak-project/pull/2035"/>

While not rendering properly yet, and some critical pieces of code still missing.  You can open and cycle through the progress ring menu.

<!-- TODO video -->

# Jak 2 - Decompilation Tooling

## Better Documentation for using PAL <PRLink href="https://github.com/open-goal/jak-project/pull/1995"/>

While we don't recommend using a non-NTSC black label if you plan on developing, it isn't impossible and some better documentation was added to address this.

The reason we stick to one version is so everyone is all on the same page and working against the same target.  Later versions obviously contain changes which can conflict with the manual type casts and such that we are forced to do.

## REPL Quality of Life Adds

### Key-binds, config, and startup commands <PRLink href="https://github.com/open-goal/jak-project/pull/2030"/>

As the REPL starts to be used more to test the actual game and debug problems, it's rough edges present themselves once again.

For example, you can find yourself running the same commands over and over to do things like:
- connect to the game
- attach a debugger (and continue from the initial break)
- open the backtrace when a crash occurs
- stop the debugger once it's crashed so you can relaunch it

Now, all of these tasks (and a few more) can be done with hotkeys

Additionally, you can define commands to automatically run on startup _and_ I'm slowly transitioning away from CLI args to a config file scheme.

<ReactPlayer controls url={require("./video/repl-binds.mp4").default} />

### Simplfy Reloading of an Object File <PRLink href="https://github.com/open-goal/jak-project/pull/2036"/>

One of the reasons why GOAL was so cool, is they could edit source code, re-compile it, and reload it while the game was still running.  Imagine changing Jak's speed without having to close and re-open the game.

This is done with the following function:

```opengoal
(ml "path-to-file-relative-to-project-dir")
```

However this can be a pain at times, especially since we've organized Jak 2's code in a much more nested-folder structure and we don't provide decent editor tooling to just say, for example, _reload this file when I save it_.

So this provides a decent workaround where you can just provide the name of the object file you want to reload and the REPL will go looking for it, if it finds it, it'll provide the full path on your behalf.  For example

```opengoal
(ml "target")
```

:::tip
If you are constantly using `(mi)` and reloading the game from scratch to test changes, you should give this a shot instead!
:::
